{
  "openapi":"3.0.3",
  "info":{
    "title":"Rest API",
    "description":"Swagger da API desenvolvida com exemplos e informações de básicas de uso.",
    "version":"1.0.0",
    "contact":{
      "name":"API Support",
      "url":"https://github.com/tglima/restapi-express-postgresql"
    }
  },
  "produces":[
    "application/json"
  ],
  "servers":[
    {
      "url":"http://localhost:3000/api/v1",
      "description":"Ambiente de desenvolvimento"
    }
  ],
  "swaggerOptions":{
    "docExpansion":"none",
    "defaultModelExpandDepth":-1
  },
  "paths":{
    "/auth":{
      "post":{
        "summary":"Obtenção do token",
        "description":"Rota para obtenção do Bearer token",
        "tags":[
          "auth"
        ],
        "requestBody":{
          "content":{
            "application/json":{
              "schema":{
                "$ref":"#/components/schemas/credentials"
              },
              "examples":{
                "credentials":{
                  "value":{
                    "username":"user",
                    "password":"userPassword"
                  }
                }
              }
            }
          }
        },
        "responses":{
          "200":{
            "description":"Bearer token gerado com sucesso",
            "content":{
              "application/json":{
                "schema":{
                  "$ref":"#/components/schemas/bearerToken"
                }
              }
            }
          },
          "401":{
            "description":"Falha na autenticação",
            "content":{
              "application/json":{
                "schema":{
                  "$ref":"#/components/schemas/defaultApiResponse"
                },
                "examples":{
                  "authFailed":{
                    "$ref":"#/components/examples/authFailed"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/product/find":{
      "get":{
        "summary":"Busca todos produtos disponíveis",
        "description":"Rota para obter todos os produtos disponíveis",
        "tags":[
          "product"
        ],
        "security":[
          {
            "bearerAuth":[

            ]
          }
        ],
        "responses":{
          "200":{
            "description":"Produtos encontrados",
            "content":{
              "application/json":{
                "schema":{
                  "$ref":"#/components/schemas/arrayProducts"
                }
              }
            }
          },
          "401":{
            "description":"Falha na autenticação",
            "content":{
              "application/json":{
                "schema":{
                  "$ref":"#/components/schemas/defaultApiResponse"
                },
                "examples":{
                  "unauthorized":{
                    "$ref":"#/components/examples/unauthorized"
                  }
                }
              }
            }
          },
          "404":{
            "description":"Não encontrado",
            "content":{
              "application/json":{
                "schema":{
                  "$ref":"#/components/schemas/defaultApiResponse"
                },
                "examples":{
                  "notFound":{
                    "$ref":"#/components/examples/notFound"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/product/find/id={id}":{
      "get":{
        "summary":"Busca o produto pelo ID",
        "description":"Rota para obter o produto de acordo com o seu id",
        "tags":[
          "product"
        ],
        "security":[
          {
            "bearerAuth":[

            ]
          }
        ],
        "parameters":[
          {
            "name":"id",
            "in":"path",
            "required":true,
            "description":"Id do produto a ser pesquisado",
            "schema":{
              "type":"integer",
              "format":"int32"
            }
          }
        ],
        "responses":{
          "200":{
            "description":"Produto encontrado",
            "content":{
              "application/json":{
                "schema":{
                  "$ref":"#/components/schemas/product"
                }
              }
            }
          },
          "400":{
            "description":"Falha na Requisição",
            "content":{
              "application/json":{
                "schema":{
                  "$ref":"#/components/schemas/defaultApiResponse"
                },
                "examples":{
                  "invalidRequest":{
                    "$ref":"#/components/examples/invalidRequest"
                  }
                }
              }
            }
          },
          "401":{
            "description":"Falha na autenticação",
            "content":{
              "application/json":{
                "schema":{
                  "$ref":"#/components/schemas/defaultApiResponse"
                },
                "examples":{
                  "unauthorized":{
                    "$ref":"#/components/examples/unauthorized"
                  }
                }
              }
            }
          },
          "404":{
            "description":"Não encontrado",
            "content":{
              "application/json":{
                "schema":{
                  "$ref":"#/components/schemas/defaultApiResponse"
                },
                "examples":{
                  "notFound":{
                    "$ref":"#/components/examples/notFound"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/contact":{
      "post":{
        "summary":"Registra uma mensagem",
        "description":"Rota para registrar uma mensagem",
        "tags":[
          "contact"
        ],
        "requestBody":{
          "content":{
            "application/json":{
              "schema":{
                "$ref":"#/components/schemas/contactMessage"
              }
            }
          }
        },
        "responses":{
          "201":{
            "description":"Mensagem registrada com sucesso",
            "content":{
              "application/json":{
                "schema":{
                  "$ref":"#/components/schemas/defaultApiResponse"
                },
                "examples":{
                  "regSuccess":{
                    "$ref":"#/components/examples/regSuccess"
                  }
                }
              }
            }
          },
          "400":{
            "description":"Falha na Requisição",
            "content":{
              "application/json":{
                "schema":{
                  "$ref":"#/components/schemas/defaultApiResponse"
                },
                "examples":{
                  "invalidRequest":{
                    "$ref":"#/components/examples/invalidRequest"
                  }
                }
              }
            }
          },
          "401":{
            "description":"Falha na autenticação",
            "content":{
              "application/json":{
                "schema":{
                  "$ref":"#/components/schemas/defaultApiResponse"
                },
                "examples":{
                  "unauthorized":{
                    "$ref":"#/components/examples/unauthorized"
                  }
                }
              }
            }
          },
          "404":{
            "description":"Não encontrado",
            "content":{
              "application/json":{
                "schema":{
                  "$ref":"#/components/schemas/defaultApiResponse"
                },
                "examples":{
                  "notFound":{
                    "$ref":"#/components/examples/notFound"
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components":{
    "schemas":{
      "credentials":{
        "type":"object",
        "properties":{
          "username":{
            "type":"string",
            "example":"user@contact.com",
            "required":true
          },
          "password":{
            "type":"string",
            "example":"userPassword",
            "required":true
          }
        }
      },
      "defaultApiResponse":{
        "type":"object",
        "properties":{
          "messages":{
            "type":"array",
            "items":{
              "type":"string"
            }
          }
        }
      },
      "bearerToken":{
        "type":"object",
        "properties":{
          "access_token":{
            "type":"string",
            "example":"string"
          },
          "token_type":{
            "type":"string",
            "example":"Bearer"
          },
          "expires_in":{
            "type":"number",
            "example":18000
          },
          "date_time_expiration":{
            "type":"string($date-time)",
            "example":"2022-01-01T00:00:10.000Z"
          }
        }
      },
      "product":{
        "type":"object",
        "properties":{
          "idProduct":{
            "type":"integer",
            "example":1,
            "required":true
          },
          "nmProduct":{
            "type":"string",
            "example":"Basic",
            "required":true
          },
          "vlMonthPrice":{
            "type":"number",
            "example":14.99,
            "required":true
          },
          "nmVideoQuality":{
            "type":"number",
            "example":14.99,
            "required":true
          },
          "nmResolution":{
            "type":"string",
            "example":"480p",
            "required":true
          },
          "qtSimultaneousScreens":{
            "type":"number",
            "example":1,
            "required":true
          }
        }
      },
      "arrayProducts":{
        "type":"object",
        "properties":{
          "products":{
            "type":"array",
            "items":{
              "$ref":"#/components/schemas/product"
            }
          }
        }
      },
      "contactMessage":{
        "type":"object",
        "properties":{
          "nmContact":{
            "type":"string",
            "example":"Maria da Silva",
            "required":true
          },
          "deEmail":{
            "type":"string",
            "example":"contato@email.com"
          },
          "deMessage":{
            "type":"string",
            "example":"Mensagem enviada para testes contato",
            "required":true
          },
          "deTelephone":{
            "type":"string",
            "example":"48999999999"
          }
        }
      }
    },
    "examples":{
      "authFailed":{
        "value":{
          "messages":[
            "Credenciais inválidas!"
          ]
        }
      },
      "invalidRequest":{
        "value":{
          "messages":[
            "Ocorreu uma falha/erro na sua requisição. Reveja os dados enviados e tente novamente!"
          ]
        }
      },
      "notFound":{
        "value":{
          "messages":[
            "Item não encontrado!"
          ]
        }
      },
      "regSuccess":{
        "value":{
          "messages":[
            "Registrado com sucesso!!"
          ]
        }
      },
      "serverError":{
        "value":{
          "messages":[
            "Erro interno no servidor!"
          ]
        }
      },
      "unauthorized":{
        "value":{
          "messages":[
            "Acesso negado, Token de acesso inválido!"
          ]
        }
      }
    },
    "securitySchemes":{
      "bearerAuth":{
        "type":"http",
        "scheme":"bearer",
        "bearerFormat":"JWT"
      }
    }
  }
}
