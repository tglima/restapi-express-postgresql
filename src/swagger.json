{
  "openapi":"3.0.3",
  "info":{
    "title":"Rest API",
    "description":"Swagger da API desenvolvida com exemplos e informações de básicas de uso.",
    "version":"1.0.0",
    "contact":{
      "name":"API Support",
      "url":"https://github.com/tglima/restapi-express-postgresql"
    }
  },
  "produces":[
    "application/json"
  ],
  "servers":[
    {
      "url":"{{URL_API}}/api/v1",
      "description":"Ambiente de desenvolvimento"
    }
  ],
  "swaggerOptions":{
    "docExpansion":"none",
    "defaultModelExpandDepth":-1
  },
  "paths":{
    "/auth":{
      "post":{
        "summary":"Obtenção do token",
        "description":"Rota para obtenção do Bearer token",
        "tags":[
          "auth"
        ],
        "requestBody":{
          "content":{
            "application/json":{
              "schema":{
                "$ref":"#/components/schemas/credentials"
              },
              "examples":{
                "credentials":{
                  "value":{
                    "username":"user",
                    "password":"userPassword"
                  }
                }
              }
            }
          }
        },
        "responses":{
          "200":{
            "description":"Bearer token gerado com sucesso",
            "content":{
              "application/json":{
                "schema":{
                  "$ref":"#/components/schemas/bearerToken"
                }
              }
            }
          },
          "401":{
            "description":"Falha na autenticação",
            "content":{
              "application/json":{
                "schema":{
                  "$ref":"#/components/schemas/defaultApiResponse"
                },
                "examples":{
                  "authFailed":{
                    "$ref":"#/components/examples/authFailed"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/product/find":{
      "get":{
        "summary":"Busca todos produtos disponíveis",
        "description":"Rota para obter todos os produtos disponíveis",
        "tags":[
          "product"
        ],
        "security":[
          {
            "bearerAuth":[

            ]
          }
        ],
        "responses":{
          "200":{
            "description":"Produtos encontrados",
            "content":{
              "application/json":{
                "schema":{
                  "$ref":"#/components/schemas/arrayProducts"
                }
              }
            }
          },
          "401":{
            "description":"Falha na autenticação",
            "content":{
              "application/json":{
                "schema":{
                  "$ref":"#/components/schemas/defaultApiResponse"
                },
                "examples":{
                  "unauthorized":{
                    "$ref":"#/components/examples/unauthorized"
                  }
                }
              }
            }
          },
          "404":{
            "description":"Não encontrado",
            "content":{
              "application/json":{
                "schema":{
                  "$ref":"#/components/schemas/defaultApiResponse"
                },
                "examples":{
                  "notFound":{
                    "$ref":"#/components/examples/notFound"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/product/find/id={id}":{
      "get":{
        "summary":"Busca o produto pelo ID",
        "description":"Rota para obter o produto de acordo com o seu id",
        "tags":[
          "product"
        ],
        "security":[
          {
            "bearerAuth":[

            ]
          }
        ],
        "parameters":[
          {
            "name":"id",
            "in":"path",
            "required":true,
            "description":"Id do produto a ser pesquisado",
            "schema":{
              "type":"integer",
              "format":"int32"
            }
          }
        ],
        "responses":{
          "200":{
            "description":"Produto encontrado",
            "content":{
              "application/json":{
                "schema":{
                  "$ref":"#/components/schemas/product"
                }
              }
            }
          },
          "400":{
            "description":"Falha na Requisição",
            "content":{
              "application/json":{
                "schema":{
                  "$ref":"#/components/schemas/defaultApiResponse"
                },
                "examples":{
                  "invalidRequest":{
                    "$ref":"#/components/examples/invalidRequest"
                  }
                }
              }
            }
          },
          "401":{
            "description":"Falha na autenticação",
            "content":{
              "application/json":{
                "schema":{
                  "$ref":"#/components/schemas/defaultApiResponse"
                },
                "examples":{
                  "unauthorized":{
                    "$ref":"#/components/examples/unauthorized"
                  }
                }
              }
            }
          },
          "404":{
            "description":"Não encontrado",
            "content":{
              "application/json":{
                "schema":{
                  "$ref":"#/components/schemas/defaultApiResponse"
                },
                "examples":{
                  "notFound":{
                    "$ref":"#/components/examples/notFound"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/contact":{
      "post":{
        "summary":"Registra uma mensagem",
        "description":"Rota para registrar uma mensagem",
        "tags":[
          "contact"
        ],
        "requestBody":{
          "content":{
            "application/json":{
              "schema":{
                "$ref":"#/components/schemas/contactMessage"
              }
            }
          }
        },
        "responses":{
          "201":{
            "description":"Mensagem registrada com sucesso",
            "content":{
              "application/json":{
                "schema":{
                  "$ref":"#/components/schemas/defaultApiResponse"
                },
                "examples":{
                  "regSuccess":{
                    "$ref":"#/components/examples/regSuccess"
                  }
                }
              }
            }
          },
          "400":{
            "description":"Falha na Requisição",
            "content":{
              "application/json":{
                "schema":{
                  "$ref":"#/components/schemas/defaultApiResponse"
                },
                "examples":{
                  "invalidRequest":{
                    "$ref":"#/components/examples/invalidRequest"
                  }
                }
              }
            }
          },
          "401":{
            "description":"Falha na autenticação",
            "content":{
              "application/json":{
                "schema":{
                  "$ref":"#/components/schemas/defaultApiResponse"
                },
                "examples":{
                  "unauthorized":{
                    "$ref":"#/components/examples/unauthorized"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/customer/find/id={id}":{
      "get":{
        "summary":"Busca o Cliente pelo ID",
        "description":"Rota para obter os dados de um cliente de acordo com o seu id",
        "tags":[
          "customer"
        ],
        "security":[
          {
            "bearerAuth":[

            ]
          }
        ],
        "parameters":[
          {
            "name":"id",
            "in":"path",
            "required":true,
            "description":"Id do cliente a ser pesquisado",
            "schema":{
              "type":"integer",
              "format":"int32"
            }
          }
        ],
        "responses":{
          "200":{
            "description":"Cliente encontrado",
            "content":{
              "application/json":{
                "schema":{
                  "$ref":"#/components/schemas/customer"
                }
              }
            }
          },
          "400":{
            "description":"Falha na Requisição",
            "content":{
              "application/json":{
                "schema":{
                  "$ref":"#/components/schemas/defaultApiResponse"
                },
                "examples":{
                  "invalidRequest":{
                    "$ref":"#/components/examples/invalidRequest"
                  }
                }
              }
            }
          },
          "401":{
            "description":"Falha na autenticação",
            "content":{
              "application/json":{
                "schema":{
                  "$ref":"#/components/schemas/defaultApiResponse"
                },
                "examples":{
                  "unauthorized":{
                    "$ref":"#/components/examples/unauthorized"
                  }
                }
              }
            }
          },
          "404":{
            "description":"Não encontrado",
            "content":{
              "application/json":{
                "schema":{
                  "$ref":"#/components/schemas/defaultApiResponse"
                },
                "examples":{
                  "notFound":{
                    "$ref":"#/components/examples/notFound"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/customer/find/document={nu_document}":{
      "get":{
        "summary":"Busca o Cliente pelo número do documento",
        "description":"Rota para obter os dados de um cliente de acordo com o seu documento",
        "tags":[
          "customer"
        ],
        "security":[
          {
            "bearerAuth":[

            ]
          }
        ],
        "parameters":[
          {
            "name":"nu_document",
            "in":"path",
            "required":true,
            "description":"Corresponde ao CPF de um cliente",
            "schema":{
              "type":"string"
            }
          }
        ],
        "responses":{
          "200":{
            "description":"Cliente encontrado",
            "content":{
              "application/json":{
                "schema":{
                  "$ref":"#/components/schemas/customer"
                }
              }
            }
          },
          "400":{
            "description":"Falha na Requisição",
            "content":{
              "application/json":{
                "schema":{
                  "$ref":"#/components/schemas/defaultApiResponse"
                },
                "examples":{
                  "invalidRequest":{
                    "$ref":"#/components/examples/invalidRequest"
                  }
                }
              }
            }
          },
          "401":{
            "description":"Falha na autenticação",
            "content":{
              "application/json":{
                "schema":{
                  "$ref":"#/components/schemas/defaultApiResponse"
                },
                "examples":{
                  "unauthorized":{
                    "$ref":"#/components/examples/unauthorized"
                  }
                }
              }
            }
          },
          "404":{
            "description":"Não encontrado",
            "content":{
              "application/json":{
                "schema":{
                  "$ref":"#/components/schemas/defaultApiResponse"
                },
                "examples":{
                  "notFound":{
                    "$ref":"#/components/examples/notFound"
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components":{
    "schemas":{
      "credentials":{
        "type":"object",
        "properties":{
          "username":{
            "type":"string",
            "example":"user@contact.com",
            "required":true
          },
          "password":{
            "type":"string",
            "example":"userPassword",
            "required":true
          }
        }
      },
      "defaultApiResponse":{
        "type":"object",
        "properties":{
          "messages":{
            "type":"array",
            "items":{
              "type":"string"
            }
          }
        }
      },
      "bearerToken":{
        "type":"object",
        "properties":{
          "access_token":{
            "type":"string",
            "example":"string"
          },
          "token_type":{
            "type":"string",
            "example":"Bearer"
          },
          "expires_in":{
            "type":"number",
            "example":18000
          },
          "date_time_expiration":{
            "type":"string($date-time)",
            "example":"2022-01-01T00:00:10.000Z"
          }
        }
      },
      "product":{
        "type":"object",
        "properties":{
          "id_product":{
            "type":"integer",
            "example":1,
            "required":true
          },
          "nm_product":{
            "type":"string",
            "example":"Basic",
            "required":true
          },
          "vl_month_price":{
            "type":"number",
            "example":14.99,
            "required":true
          },
          "nm_videoQuality":{
            "type":"number",
            "example":14.99,
            "required":true
          },
          "nm_resolution":{
            "type":"string",
            "example":"480p",
            "required":true
          },
          "qt_simultaneous_screens":{
            "type":"number",
            "example":1,
            "required":true
          }
        }
      },
      "arrayProducts":{
        "type":"object",
        "properties":{
          "products":{
            "type":"array",
            "items":{
              "$ref":"#/components/schemas/product"
            }
          }
        }
      },
      "contactMessage":{
        "type":"object",
        "properties":{
          "nm_contact":{
            "type":"string",
            "example":"Maria da Silva",
            "required":true
          },
          "de_email":{
            "type":"string",
            "example":"contato@email.com"
          },
          "de_message":{
            "type":"string",
            "example":"Mensagem enviada para testes contato",
            "required":true
          },
          "de_telephone":{
            "type":"string",
            "example":"48999999999"
          }
        }
      },
      "customer":{
        "type":"object",
        "properties":{
          "id_customer":{
            "type":"integer",
            "example":1,
            "required":true
          },
          "nm_customer":{
            "type":"string",
            "example":"Maria da Silva",
            "required":true
          },
          "de_gender":{
            "type":"string",
            "example":"F",
            "required":true
          },
          "dt_birth":{
            "type":"string($date-time)",
            "example":"1965-07-02T03:00:00.000Z",
            "required":true
          },
          "nu_document":{
            "type":"string",
            "example":"01234567890",
            "required":true
          },
          "de_email":{
            "type":"string",
            "example":"contato@email.com",
            "required":false
          },
          "nu_ddd":{
            "type":"string",
            "example":"11",
            "required":false
          },
          "nu_phone":{
            "type":"string",
            "example":"32320000",
            "required":false
          }
        }
      }
    },
    "examples":{
      "authFailed":{
        "value":{
          "messages":[
            "Credenciais inválidas!"
          ]
        }
      },
      "invalidRequest":{
        "value":{
          "messages":[
            "Ocorreu uma falha/erro na sua requisição. Reveja os dados enviados e tente novamente!"
          ]
        }
      },
      "notFound":{
        "value":{
          "messages":[
            "Item não encontrado!"
          ]
        }
      },
      "regSuccess":{
        "value":{
          "messages":[
            "Registrado com sucesso!!"
          ]
        }
      },
      "serverError":{
        "value":{
          "messages":[
            "Erro interno no servidor!"
          ]
        }
      },
      "unauthorized":{
        "value":{
          "messages":[
            "Usuário sem permissão ou Token inválido!"
          ]
        }
      }
    },
    "securitySchemes":{
      "bearerAuth":{
        "type":"http",
        "scheme":"bearer",
        "bearerFormat":"JWT"
      }
    }
  }
}
